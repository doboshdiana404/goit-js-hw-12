{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport function createMarcup(arr,page=1) {\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"item-card\">\n        <a href=\"${largeImageURL}\"><img class=\"item-img\" src=\"${webformatURL}\" alt=\"${tags}\"  width=\"360\" /></a>\n        <ul class=\"list-description\">\n        <li class=\"item-description\">\n        <h3 class=\"description-title\">Likes</h3>\n        <p class=\"description-count\">${likes}</p>\n        </li>\n        <li class=\"item-description\">\n        <h3 class=\"description-title\">Views</h3>\n        <p class=\"description-count\">${views}</p>\n        </li>\n        <li class=\"item-description\">\n        <h3 class=\"description-title\">Comments</h3>\n        <p class=\"description-count\">${comments}</p>\n        </li>\n        <li class=\"item-description\">\n        <h3 class=\"description-title\">Downloads</h3>\n        <p class=\"description-count\">${downloads}</p>\n        </li>\n        </ul>\n        </li>\n        `).join(\"\");\n}\n","import axios from \"axios\";\n\nconst API_KEY = '46929640-6caf07f74187fad8fc62b9d85';\nconst URL = 'https://pixabay.com/api/';\n\nconst countItem = 15;\n\nexport async function fetchData(input = \"\", page = 1, countItem) {\n  \n  try {\n    const response = await axios(`${URL}`, {\n    params: {\n    key: API_KEY,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    q: input,\n    page,\n    per_page: countItem\n    }\n  });\n  return response.data;\n  } catch (error) {\n    alert(error.message);\n  }\n  \n  \n}\n\n","import { createMarcup } from './js/render-functions.js';\nimport { fetchData } from './js/pixabay-api.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.search-form');\nconst list = document.querySelector('.gallery-list');\nconst input = document.querySelector('.search-input');\nconst load = document.querySelector('.loading');\nconst loadEnd = document.querySelector('.load-end');\nconst loadMore = document.querySelector('.js-load-more');\nlet imageInput = '';\nlet page = 1;\nconst countItem = 15;\nlet gallery = new SimpleLightbox('.gallery-list li a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 300,\n});\n\nform.addEventListener('submit', handeSearch);\nloadMore.addEventListener('click', onLoadMore);\n\nasync function handeSearch(event) {\n  event.preventDefault();\n  const submitBtn = document.querySelector('.search-btn');\n  loadMore.style.display = 'none';\n  list.innerHTML = '';\n  submitBtn.disabled = true;\n  imageInput = input.value.trim();\n\n  if (!imageInput) {\n    iziToast.error({\n      maxWidth: 500,\n      position: 'topRight',\n      title: 'Warning',\n      color: 'orange',\n      message: 'Enter a search word!',\n    });\n    list.innerHTML = '';\n    loadMore.style.display = 'none';\n    return;\n  }\n  load.classList.add('loader');\n  try {\n    const data = await fetchData(imageInput, (page = 1), countItem);\n    load.classList.remove('loader');\n    if (!data.hits.length) {\n      iziToast.error({\n        maxWidth: 432,\n        position: 'topRight',\n        title: 'Error',\n        color: 'red',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      form.reset();\n      list.innerHTML = '';\n      loadMore.style.display = 'none';\n      \n      return;\n    }\n    loadMore.classList.add('load-more');\n\n    list.insertAdjacentHTML('afterbegin', createMarcup(data.hits, page));\n    gallery.refresh();\n\n    if (page < Math.ceil(data.totalHits / 15)) {\n      loadMore.style.display = 'inline-block';\n    }\n\n    form.reset();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      timeout: 3000,\n      closeOnClick: true,\n    });\n  } finally {\n    submitBtn.disabled = false;\n\n  }\n}\n\nasync function onLoadMore() {\n  loadMore.style.display = 'none';\n  loadEnd.classList.replace('visually-hidden', 'load-end-open');\n\n  loadEnd.classList.add('loader');\n\n  page++;\n\n  loadMore.disabled = true;\n\n  try {\n  const data = await fetchData(imageInput, page, countItem);\n \n    if (data.totalHits > countItem * page) {\n          loadMore.style.display = 'inline-block';      \n    } else{\n      loadMore.classList.add(\"load-more-hidden\");\n           loadMore.style.display = 'none';      \n\n      iziToast.show({\n        position: 'topRight',\n        messageColor: 'blue',\n        message: `We're sorry, but you've reached the end of search results.`,\n      });  \n    }\n\n    list.insertAdjacentHTML('beforeend', createMarcup(data.hits, page));\n    gallery.refresh();\n    const card = document.querySelector('.item-card');\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({\n      left: 0,\n      top: cardHeight * 3 - 76,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      timeout: 3000,\n      closeOnClick: true,\n    });\n  } finally {\n    loadMore.disabled = false;\n    loadEnd.classList.remove('loader');\n    loadEnd.classList.add('visually-hidden');\n  }\n}\n"],"names":["createMarcup","arr","page","webformatURL","largeImageURL","tags","likes","views","comments","downloads","API_KEY","URL","fetchData","input","countItem","axios","error","form","list","load","loadEnd","loadMore","imageInput","gallery","SimpleLightbox","handeSearch","onLoadMore","event","submitBtn","iziToast","data","cardHeight"],"mappings":"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"}